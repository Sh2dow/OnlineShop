@model IEnumerable<OnlineShop.Models.ItemFinal>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Products</h2>

<table class="tableMVC">
    @*<tr>
            <th>
                @Html.DisplayNameFor(model => model.Image)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Title)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Price)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EndTime)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PrimaryCategoryName)
            </th>
            <th>
                "Actions"
            </th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <img src="data:image;base64,@item.Image" width="80" height="80" />
                </td>
                <td>
                    <a href="@item.ViewItemURLForNaturalSearch">@item.Title</a>
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.EndTime)
                </td>
                <td>
                    @Html.ActionLink(item.PrimaryCategoryName, "SaveProducts", "Home", new { param = item.PrimaryCategoryID }, null)
                </td>
                <td>
                    @Html.ActionLink("Details", "Details", new { id = item.ItemID }) |
                    @Html.ActionLink("Delete", "Delete", new { id = item.ItemID })
                </td>
            </tr>
        }*@
</table>

<div class='jumbotron'>
    <div class='tableKO'>
        <div data-bind='simpleGrid: gridViewModel'> </div>

        <button data-bind='click: sortByTitle'>
            Sort by Title
        </button>

        <button data-bind='click: sortByPrimaryCategoryName'>
            Sort by Category
        </button>

        <button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
            Jump to first page
        </button>
    </div>
</div>

<script src="~/App/app2.js"></script>
<script type="text/javascript">
    var jsonData = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model));
    ko.applyBindings(new PagedGridModel(jsonData));
</script>
